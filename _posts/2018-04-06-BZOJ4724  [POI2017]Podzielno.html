---
subtitle: "结论题"
tags: 
 - 数论-杂题
 - 基础算法-二分
grammar_cjkRuby: true
catalog: true
layout:  post
header-img: "img/header/P89.jpg"
preview-img: "/img/preview/P89.jpg"
---
<p>标签：数论，二分</p>

<h1 id="题目">题目</h1>

<p><a href="https://www.lydsy.com/JudgeOnline/problem.php?id=4724">题目传送门</a></p>



<h2 id="description">Description</h2>

<p>B进制数，每个数字i(i=0,1,…,B-1)有a[i]个。你要用这些数字组成一个最大的B进制数X(不能有前导零，不需要用完所有数字)，使得X是B-1的倍数。q次询问，每次询问X在B进制下的第k位数字是什么(最低位是第0位)。</p>



<h2 id="input">Input</h2>

<p>第一行包含两个正整数B(2&lt;=B&lt;=10^6),q(1&lt;=q&lt;=10^5)。 <br>
第二行包含B个正整数a[0],a[1],a[2],…,a<a href="1&lt;=a%5bi%5d&lt;=10^6">B-1</a>。 <br>
接下来q行，每行一个整数k(0&lt;=k&lt;=10^18)，表示一个询问。</p>



<h2 id="output">Output</h2>

<p>输出q行，每行一个整数，依次回答每个询问，如果那一位不存在，请输出-1。</p>



<h2 id="sample-input">Sample Input</h2>



<pre class="prettyprint"><code class=" hljs ">3 3
1 1 1
0
1
2</code></pre>



<h2 id="sample-output">Sample Output</h2>



<pre class="prettyprint"><code class=" hljs diff">0
2
<span class="hljs-deletion">-1</span></code></pre>



<h1 id="分析">分析</h1>

<p>结论题：若一个数被B-1整除，则它在B进制下各个位置的和一定能被B-1整除 </p>

<p><a href="https://blog.csdn.net/neither_nor/article/details/53768905">证明去看这位大爷题解吧</a></p>

<p>然后删去那个余数，做一遍前缀和，二分查询答案即可</p>

<h1 id="code">code</h1>



<pre class="prettyprint"><code class=" hljs cpp"><span class="hljs-preprocessor">#include&lt;iostream&gt;</span>
<span class="hljs-preprocessor">#include&lt;cstdio&gt;</span>
<span class="hljs-preprocessor">#include&lt;cstdlib&gt;</span>
<span class="hljs-preprocessor">#include&lt;cmath&gt;</span>
<span class="hljs-preprocessor">#include&lt;cstring&gt;</span>
<span class="hljs-preprocessor">#include&lt;algorithm&gt;</span>
<span class="hljs-preprocessor">#define rep(i,a,b) for(int i=a;i&lt;=b;i++)</span>
<span class="hljs-preprocessor">#define dep(i,a,b) for(int i=a;i&gt;=b;i--)</span>
<span class="hljs-preprocessor">#define ll long long</span>
<span class="hljs-preprocessor">#define mem(x,num) memset(x,num,sizeof x)</span>
<span class="hljs-preprocessor">#define reg(x) for(int i=last[x];i;i=e[i].next)</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-keyword">inline</span> ll read(){
    ll f=<span class="hljs-number">1</span>,x=<span class="hljs-number">0</span>;<span class="hljs-keyword">char</span> ch=getchar();
    <span class="hljs-keyword">while</span>(ch&lt;<span class="hljs-string">'0'</span>||ch&gt;<span class="hljs-string">'9'</span>){<span class="hljs-keyword">if</span>(ch==<span class="hljs-string">'-'</span>)f=-<span class="hljs-number">1</span>;ch=getchar();}
    <span class="hljs-keyword">while</span>(ch&gt;=<span class="hljs-string">'0'</span>&amp;&amp;ch&lt;=<span class="hljs-string">'9'</span>){x=x*<span class="hljs-number">10</span>+ch-<span class="hljs-string">'0'</span>;ch=getchar();}
    <span class="hljs-keyword">return</span> x*f;
}
<span class="hljs-comment">//**********head by yjjr**********</span>
<span class="hljs-preprocessor">#define mid ((l+r)&gt;&gt;1) </span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> maxn=<span class="hljs-number">1e6</span>+<span class="hljs-number">6</span>;
ll a[maxn],s=<span class="hljs-number">0</span>;<span class="hljs-keyword">int</span> B,Q;
<span class="hljs-keyword">int</span> main()
{
    B=read(),Q=read();
    rep(i,<span class="hljs-number">0</span>,B-<span class="hljs-number">1</span>){
        a[i]=read();
        s=(s+a[i]*i)%(B-<span class="hljs-number">1</span>);
    }
    <span class="hljs-keyword">if</span>(s)a[s]--;
    rep(i,<span class="hljs-number">1</span>,B-<span class="hljs-number">1</span>)a[i]+=a[i-<span class="hljs-number">1</span>];
    <span class="hljs-keyword">while</span>(Q--){
        ll x=read()+<span class="hljs-number">1</span>;
        <span class="hljs-keyword">int</span> ans=-<span class="hljs-number">1</span>,l=<span class="hljs-number">0</span>,r=B-<span class="hljs-number">1</span>;
        <span class="hljs-keyword">while</span>(l&lt;=r){
            <span class="hljs-keyword">if</span>(a[mid]&gt;=x)ans=mid,r=mid-<span class="hljs-number">1</span>;
            <span class="hljs-keyword">else</span> l=mid+<span class="hljs-number">1</span>;
        }
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>,ans);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre>