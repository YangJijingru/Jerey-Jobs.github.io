---
tags: 
 - DP-状压
grammar_cjkRuby: true
catalog: true
layout:  post
header-img: "img/header/P24.jpg"
preview-img: "/img/preview/P24.jpg"
---
<p style="margin:0px">
	<span style="font-weight:bold"><span style="font-size:16px;"><span style="font-family:Microsoft YaHei;">标签：状压<span style="margin:0px" lang="EN-US">DP</span></span></span></span>
</p>
<p style="margin:0px">
	<strong><span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">Description</span></span></strong>
</p>
<p style="margin:0px">
	<span style="font-family:Microsoft YaHei;font-size:16px;">　　给一个数字串<span style="margin:0px" lang="EN-US">s</span>和正整数<span style="margin:0px" lang="EN-US">d,</span>统计<span style="margin:0px" lang="EN-US">s</span>有多少种不同的排列能被<span style="margin:0px" lang="EN-US">d</span>整除（可以有前导<span style="margin:0px" lang="EN-US">0</span>）。例如<span style="margin:0px" lang="EN-US">123434</span>有<span style="margin:0px" lang="EN-US">90</span>种排列能<span style="margin:0px" lang="EN-US"><br />
	</span>被<span style="margin:0px" lang="EN-US">2</span>整除，其中末位为<span style="margin:0px" lang="EN-US">2</span>的有<span style="margin:0px" lang="EN-US">30</span>种，末位为<span style="margin:0px" lang="EN-US">4</span>的有<span style="margin:0px" lang="EN-US">60</span>种。</span><span style="margin:0px" lang="EN-US"></span>
</p>
<p style="margin:0px">
	<strong><span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">Input</span></span></strong>
</p>
<p style="margin:0px">
	<span style="font-size:16px;"><span style="font-family:Microsoft YaHei;">　　输入第一行是一个整数<span style="margin:0px" lang="EN-US">T</span>，表示测试数据的个数，以下每行一组<span style="margin:0px" lang="EN-US">s</span>和<span style="margin:0px" lang="EN-US">d</span>，中间用空格隔开。<span style="margin:0px" lang="EN-US">s</span>保证只包含数字<span style="margin:0px" lang="EN-US">0, 1<br />
	, 2, 3, 4, 5, 6, 7, 8, 9.</span></span></span>
</p>
<p style="margin:0px">
	<strong><span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">Output</span></span></strong>
</p>
<p style="margin:0px">
	<span style="font-family:Microsoft YaHei;font-size:16px;">　　每个数据仅一行，表示能被<span style="margin:0px" lang="EN-US">d</span>整除的排列的个数。</span><span style="margin:0px" lang="EN-US"></span>
</p>
<p style="margin:0px">
	<strong><span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">Sample Input</span></span></strong>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">7</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">000 1</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">001 1</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">1234567890 1</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">123434 2</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">1234 7</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">12345 17</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">12345678 29</span></span>
</p>
<p style="margin:0px">
	<strong><span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">Sample Output</span></span></strong>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">1</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">3</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">3628800</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">90</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">3</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">6</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">1398</span></span>
</p>
<p style="margin:0px">
	<strong><span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">HINT</span></span></strong>
</p>
<p style="margin:0px">
	<span style="font-size:16px;"><span style="font-family:Microsoft YaHei;">在前三个例子中，排列分别有<span style="margin:0px" lang="EN-US">1, 3, 3628800</span>种，它们都是<span style="margin:0px" lang="EN-US">1</span>的倍数。<span style="margin:0px" lang="EN-US"><br />
	</span>【限制】<span style="margin:0px" lang="EN-US"><br />
	100%</span>的数据满足：<span style="margin:0px" lang="EN-US">s</span>的长度不超过<span style="margin:0px" lang="EN-US">10,1&lt;=d&lt;=1000, 1&lt;=T&lt;=15</span></span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">&nbsp;</span></span>
</p>
<p style="margin:0px">
	<span style="font-family:Microsoft YaHei;font-size:16px;">状压<span style="margin:0px" lang="EN-US">DP</span>模板题，<span style="margin:0px" lang="EN-US">f[i][j]</span>表示状态为<span style="margin:0px" lang="EN-US">i</span>时余数为<span style="margin:0px" lang="EN-US">j</span>的个数</span><span style="margin:0px" lang="EN-US"></span>
</p>
<p style="margin:0px">
	<span style="font-family:Microsoft YaHei;font-size:16px;">然后排列组合去重</span><span style="margin:0px" lang="EN-US"></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">&nbsp;</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:Microsoft YaHei;font-size:16px;">Code</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"></span>
</p>
<pre class="cpp" name="code">#include&lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;cstdlib&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#define rep(i,a,b) for(int i=a;i&lt;=b;i++)
#define dep(i,a,b) for(int i=a;i&gt;=b;i--)
#define LL long long
#define mem(x,num) memset(x,num,sizeof x)
using namespace std;
inline LL read()
{
	LL f=1,x=0;char ch=getchar();
	while(ch&lt;'0'||ch&gt;'9'){if(ch=='-')f=-1;ch=getchar();}
	while(ch&gt;='0'&amp;&amp;ch&lt;='9'){x=x*10+ch-'0';ch=getchar();}
	return x*f;
}
const int maxn=20;
LL bin[20],T,d,len,a[maxn],v[maxn],tot[maxn],f[1&lt;&lt;11][1&lt;&lt;11];
char ch[maxn];

void dp()
{
	rep(i,0,bin[len]-1)
	    rep(j,0,d-1)f[i][j]=0;
	f[0][0]=1;
	rep(i,0,bin[len]-1)
	    rep(j,0,d-1)
	        if(f[i][j])
				rep(x,1,len)
			        if((bin[x-1]&amp;i)==0)
						f[i|bin[x-1]][(a[x]+j*10)%d]+=f[i][j];
}

int main()
{
	T=read();
	bin[0]=1;rep(i,1,19)bin[i]=bin[i-1]&lt;&lt;1;
	while(T--){
		scanf(&quot;%s&quot;,ch+1);d=read();
		len=strlen(ch+1);
		rep(i,0,9)v[i]=1,tot[i]=0;
		rep(i,1,len){
			a[i]=ch[i]-'0';
			tot[a[i]]++;
			v[a[i]]*=tot[a[i]];
		}
		dp();
		rep(i,0,9)f[bin[len]-1][0]/=v[i];
		printf(&quot;%lld\n&quot;,f[bin[len]-1][0]);
	}
	return 0;
}</pre>
<br />

<p>
	<br />
	
</p>
