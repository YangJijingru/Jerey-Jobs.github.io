---
tags: 
 - 基础算法-bfs
grammar_cjkRuby: true
catalog: true
layout:  post
header-img: "img/header/P17.jpg"
preview-img: "/img/preview/P17.jpg"
---
<h2>
	<span style="font-family:Microsoft YaHei;font-size:16px;"><span style="color:#373a3c;">标签：</span><span style="color:#373a3c;">bfs,</span><span style="color:#373a3c;">队列</span></span>
</h2>
<p align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">TheBerland's capital has the form of a rectangle with sizes&nbsp;<em>n</em> × <em>m</em>&nbsp;quarters. Allquarters are divided into three types:</span>
</p>
<p align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">·&nbsp;&nbsp;regular (labeled with the character '.') — such quarters do not produce the noisebut are not obstacles to the propagation of the noise;</span>
</p>
<p align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">·&nbsp;&nbsp;sources of noise (labeled with an uppercaseLatin letter from 'A' to 'Z') — such quarters are noise sources and arenot obstacles to the propagation of the noise;</span>
</p>
<p align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">·&nbsp;&nbsp;heavily built-up (labeled with the character'*') — such quarters are soundproofed,the noise does not penetrate into them and they themselves are obstacles to thepropagation of noise.</span>
</p>
<p align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">A quarterlabeled with letter 'A' produces&nbsp;<em>q</em>&nbsp;units of noise. Aquarter labeled with letter 'B' produces&nbsp;2·<em>q</em>&nbsp;units of noise. Andso on, up to a quarter labeled with letter 'Z', which produces&nbsp;26·<em>q</em>&nbsp;units ofnoise. There can be any number of quarters labeled with each letter in thecity.</span>
</p>
<p align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">Whenpropagating from the source of the noise, the noise level is halved when movingfrom one quarter to a quarter that shares a side with it (when an odd number isto be halved, it's rounded down). The noise spreads along the chain. Forexample, if some quarter is located at a distance&nbsp;2&nbsp;from the noise source, then the value of noise which willreach the quarter is divided by&nbsp;4. So thenoise level that comes from the source to the quarter is determined solely bythe length of the shortest path between them. Heavily built-up quarters areobstacles, the noise does not penetrate into them.</span>
</p>
<p align="left">
	<img src="http://xheditor.com/js/xheditor_skin/default/img/waiting.gif" remoteimg="0" alt="" /><br />
	
</p>
<p align="center">
	<span style="font-family:Microsoft YaHei;font-size:16px;">&nbsp;The values in the cells of the table on the right show the totalnoise level in the respective quarters for&nbsp;<em>q</em> = 100, the first termin each sum is the noise from the quarter 'A', the second — the noise from thequarter 'B'.</span>
</p>
<p align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">The noiselevel in quarter is defined as the sum of the noise from all sources. To assessthe quality of life of the population of the capital of Berland, it is requiredto find the number of quarters whose noise level exceeds the allowed level<em>p</em>.</span>
</p>
<p align="left">
	<strong><span style="font-family:Microsoft YaHei;font-size:16px;">Input</span></strong>
</p>
<p align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">The firstline contains four integers&nbsp;<em>n</em>,&nbsp;<em>m</em>,&nbsp;<em>q</em>&nbsp;and&nbsp;<em>p</em>&nbsp;(1 ≤ <em>n</em>, <em>m</em> ≤ 250,&nbsp;1 ≤ <em>q</em>, <em>p</em> ≤ 10<sup>6</sup>) — thesizes of Berland's capital, the number of noise units that a quarter 'A' produces, and the allowable noise level.</span>
</p>
<p align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">Each ofthe following&nbsp;<em>n</em>&nbsp;linescontains&nbsp;<em>m</em>&nbsp;characters— the description of the capital quarters, in the format that was described inthe statement above. It is possible that in the Berland's capital there are noquarters of any type.</span>
</p>
<p align="left">
	<strong><span style="font-family:Microsoft YaHei;font-size:16px;">Output</span></strong>
</p>
<p align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">Print thenumber of quarters, in which the noise level exceeds the allowed level&nbsp;<em>p</em>.</span>
</p>
<p align="left">
	<strong><span style="font-family:Microsoft YaHei;font-size:16px;">Example</span></strong>
</p>
<p align="left">
	<strong><span style="font-family:Microsoft YaHei;font-size:16px;">Input</span></strong>
</p>
<p style="background:rgb(239,239,239)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">3 3 100 140<br />
	...<br />
	A*.<br />
	.B.</span>
</p>
<p align="left">
	<strong><span style="font-family:Microsoft YaHei;font-size:16px;">Output</span></strong>
</p>
<p style="background:rgb(239,239,239)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">3</span>
</p>
<p align="left">
	<strong><span style="font-family:Microsoft YaHei;font-size:16px;">Input</span></strong>
</p>
<p style="background:rgb(239,239,239)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">3 3 2 8<br />
	B*.<br />
	BB*<br />
	BBB</span>
</p>
<p align="left">
	<strong><span style="font-family:Microsoft YaHei;font-size:16px;">Output</span></strong>
</p>
<p style="background:rgb(239,239,239)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">4</span>
</p>
<p align="left">
	<strong><span style="font-family:Microsoft YaHei;font-size:16px;">Input</span></strong>
</p>
<p style="background:rgb(239,239,239)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">3 4 5 4<br />
	..*B<br />
	..**<br />
	D...</span>
</p>
<p align="left">
	<strong><span style="font-family:Microsoft YaHei;font-size:16px;">Output</span></strong>
</p>
<p style="background:rgb(239,239,239)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">7</span>
</p>
<p align="left">
	<strong><span style="font-family:Microsoft YaHei;font-size:16px;">Note</span></strong>
</p>
<p align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">Theillustration to the first example is in the main part of the statement.</span>
</p>
<p align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">直接用队列模拟bfs，模板题</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">Code</span>
</p>
<pre name="code" class="cpp">#include&lt;bits/stdc++.h&gt;
#define rep(i,a,b) for(int i=a;i&lt;=b;i++)
using namespace std;
const int dx[4]={0,1,0,-1};
const int dy[4]={1,0,-1,0};
const int maxn=305;
 
char st[maxn][maxn];
int x[maxn*maxn],y[maxn*maxn],z[maxn*maxn];
int was[maxn][maxn],noise[maxn][maxn];
int n,m,q,p,cnt=0;
int main()
{
       cin&gt;&gt;n&gt;&gt;m&gt;&gt;q&gt;&gt;p;
       rep(i,0,n-1)scanf(&quot;%s&quot;,st[i]);
       rep(i,0,n-1)
           rep(j,0,m-1)
                  if(st[i][j]&gt;='A'&amp;&amp;st[i][j]&lt;='Z'){
                         inttemp=(st[i][j]-'A'+1)*q;
                         inthead=0,tail=1;
                         x[0]=i,y[0]=j,z[0]=temp;
                         was[i][j]=++cnt;
                         while(head&lt;tail){
                                noise[x[head]][y[head]]+=z[head];
                                if(z[head]&gt;=2)
                                       rep(j,0,3){
                                              intxnow=x[head]+dx[j],ynow=y[head]+dy[j];
                                              if(xnow&gt;=0&amp;&amp;ynow&gt;=0&amp;&amp;xnow&lt;n&amp;&amp;ynow&lt;m)
                                                     if(st[xnow][ynow]!='*'&amp;&amp;was[xnow][ynow]!=cnt){
                                                            x[tail]=xnow,y[tail]=ynow,z[tail]=z[head]&gt;&gt;1;
                                                            was[xnow][ynow]=cnt;tail++;
                                                     }
                                       }
                                head++;
                         }
                 }
       intans=0;
       rep(i,0,n-1)
           rep(j,0,m-1)if(noise[i][j]&gt;p)ans++;
       cout&lt;&lt;ans&lt;&lt;endl;
       return0;
}</pre>
<br />
<br />

<p>
	<br />
	
</p>
