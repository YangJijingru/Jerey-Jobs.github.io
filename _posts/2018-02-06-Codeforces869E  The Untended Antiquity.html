---
tags: 
 - 基础算法-模拟
grammar_cjkRuby: true
catalog: true
layout:  post
header-img: "img/header/P32.jpg"
preview-img: "/img/preview/P32.jpg"
---
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">标签：模拟，标记法</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">Koyomi is helping Oshino, an acquaintanceof his, to take care of an open space around the abandoned Eikou Cram Schoolbuilding, Oshino's makeshift residence.</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">The space is represented by a rectangulargrid of<em>n</em> × <em>m</em> cells, arranged into <em>n</em> rows and <em>m</em> columns. The<em>c</em>-thcell in the <em>r</em>-th row is denoted by (<em>r</em>, <em>c</em>).</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">Oshino places and removes barriers aroundrectangular areas of cells. Specifically, an action denoted by &quot;1<em>r</em><sub>1</sub><em>c</em><sub>1</sub> <em>r</em><sub>2</sub> <em>c</em><sub>2</sub>&quot; meansOshino's placing barriers around a rectangle with two corners being (<em>r</em><sub>1</sub>, <em>c</em><sub>1</sub>)and (<em>r</em><sub>2</sub>, <em>c</em><sub>2</sub>) and sides parallel to squaressides. Similarly, &quot;2 <em>r</em><sub>1</sub> <em>c</em><sub>1</sub><em>r</em><sub>2</sub><em>c</em><sub>2</sub>&quot; means Oshino's removing barriers around therectangle. Oshino ensures that no barriers staying on the ground share anycommon points, nor do they intersect with boundaries of the<em>n</em> × <em>m</em> area.</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">Sometimes Koyomi tries to walk from onecell to another carefully without striding over barriers, in order to avoiddamaging various items on the ground. &quot;3<em>r</em><sub>1</sub> <em>c</em><sub>1</sub><em>r</em><sub>2</sub> <em>c</em><sub>2</sub>&quot; means that Koyomi tries to walkfrom (<em>r</em><sub>1</sub>, <em>c</em><sub>1</sub>) to (<em>r</em><sub>2</sub>, <em>c</em><sub>2</sub>)without crossing barriers.</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">And you're here to tell Koyomi thefeasibility of each of his attempts.</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">Input</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">The first line of input contains threespace-separated integers<em>n</em>, <em>m</em> and <em>q</em> (1 ≤ <em>n</em>, <em>m</em> ≤ 2 500, 1 ≤ <em>q</em> ≤ 100 000) — the number of rows and columns inthe grid, and the total number of Oshino and Koyomi's actions, respectively.</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">The following <em>q</em> lines each describesan action, containing five space-separated integers<em>t</em>, <em>r</em><sub>1</sub>,<em>c</em><sub>1</sub>, <em>r</em><sub>2</sub>,<em>c</em><sub>2</sub> (1 ≤ <em>t</em> ≤ 3, 1 ≤ <em>r</em><sub>1</sub>, <em>r</em><sub>2</sub> ≤ <em>n</em>, 1 ≤ <em>c</em><sub>1</sub>, <em>c</em><sub>2</sub> ≤ <em>m</em>) — the type and two coordinates of an action. Additionally, thefollowing holds depending on the value of <em>t</em>: </span>
</p>
<ul type="disc">
	<li>
		<span style="font-family:Microsoft YaHei;font-size:16px;">If <em>t</em> = 1: 2 ≤ <em>r</em><sub>1</sub> ≤ <em>r</em><sub>2</sub> ≤ <em>n</em> - 1, 2 ≤ <em>c</em><sub>1</sub> ≤ <em>c</em><sub>2</sub> ≤ <em>m</em> - 1;</span>
	</li>
	<li>
		<span style="font-family:Microsoft YaHei;font-size:16px;">If <em>t</em> = 2: 2 ≤ <em>r</em><sub>1</sub> ≤ <em>r</em><sub>2</sub> ≤ <em>n</em> - 1, 2 ≤ <em>c</em><sub>1</sub> ≤ <em>c</em><sub>2</sub> ≤ <em>m</em> - 1, the specified group of barriers exist on the ground before the removal. </span>
	</li>
	<li>
		<span style="font-family:Microsoft YaHei;font-size:16px;">If <em>t</em> = 3: no extra restrictions.</span>
	</li>
</ul>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">Output</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">For each of Koyomi's attempts (actions with<em>t</em> = 3), output one line — containing &quot;Yes&quot;(without quotes) if it's feasible, and &quot;No&quot; (without quotes)otherwise.</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">Examples</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">Input</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">5 6 5<br />
	1 2 2 4 5<br />
	1 3 3 3 3<br />
	3 4 4 1 1<br />
	2 2 2 4 5<br />
	3 1 1 4 4</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">Output</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">No<br />
	Yes</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">Input</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">2500 2500 8<br />
	1 549 1279 1263 2189<br />
	1 303 795 1888 2432<br />
	1 2227 622 2418 1161<br />
	3 771 2492 1335 1433<br />
	1 2017 2100 2408 2160<br />
	3 48 60 798 729<br />
	1 347 708 1868 792<br />
	3 1940 2080 377 1546</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">Output</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">No<br />
	Yes<br />
	No</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">Note</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">For the first example, the situations ofKoyomi's actions are illustrated below.</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;"><br />
	</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">题意：给定一个大小为N*M的矩形和Q次操作，每次操作可以以（r1,c1）-&gt;（r2,c2）建立围墙，同样也可以拆除围墙，围墙将矩形划分为若干区域。若干次询问两个点的坐标是否在同一区域内。</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">分析：肯定是打标记操作了，将每一行单独视为一个序列，拆建围墙只需要将x=r1打上标记i，r2+1打上标记-1</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">在询问的时候，只需要判断该点所处的那一行，就可以知道其处于第几个区域中，如果区域相同，那么就输出yes</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">And else 这题的卡常很恶心啊，建议使用读入优化，数组不要开大了，否则绝对会TLE啊</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">&nbsp;</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">Code</span>
</p>
<pre name="code" class="cpp">#include&lt;bits/stdc++.h&gt;
#define rep(i,a,b) for(int i=a;i&lt;=b;i++)
#define dep(i,a,b) for(int i=a;i&gt;=b;i--)
using namespace std;
const int maxn=2506;
int was[maxn][maxn];

inline int read()
{
	int f=1,x=0;char ch=getchar();
	while(ch&lt;'0'||ch&gt;'9'){if(ch=='-')f=-1;ch=getchar();}
	while(ch&gt;='0'&amp;&amp;ch&lt;='9'){x=x*10+ch-'0';ch=getchar();}
	return x*f;
}

int main()
{
    int n=read(),m=read(),q=read();
    rep(i,1,q){
    	int t=read(),r1=read(),c1=read(),r2=read(),c2=read();
		if(t==1)rep(r,r1,r2){was[r][c1]=i;was[r][c2+1]=-1;}
		else if(t==2)rep(r,r1,r2)was[r][c1]=was[r][c2+1]=0;
		else{
		    int st=0,res1=0,res2=0;
			dep(i,c1,0)
			    if(was[r1][i]&gt;0)
				    if(st==0){res1=was[r1][i];break;}
				    else st++;
				else if(was[r1][i]&lt;0)st--;
			st=0;
			dep(i,c2,0)
			    if(was[r2][i]&gt;0)
				    if(st==0){res2=was[r2][i];break;}
					else st++;
				else if(was[r2][i]&lt;0)st--; 
			printf(&quot;%s&quot;,res1==res2?&quot;Yes\n&quot;:&quot;No\n&quot;);
		}
	}
	return 0;
}
</pre>
<br />
<br />

<p>
	<br />
	
</p>
