---
tags: 
 - 基础算法-dfs
grammar_cjkRuby: true
catalog: true
layout:  post
header-img: "img/header/P34.jpg"
preview-img: "/img/preview/P34.jpg"
---
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">标签：dfs</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;"><strong>题目描述</strong></span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">牛牛最近迷上了一种叫斗地主的扑克游戏。斗地主是一种使用黑桃、红心、梅花、方片的A到K加上大小王的共54张牌来进行的扑克牌游戏。在斗地主中，牌的大小关系根据牌的数码表示如下：3&lt;4&lt;5&lt;6&lt;7&lt;8&lt;9&lt;10&lt;J&lt;Q&lt;K&lt;A&lt;2&lt;小王&lt;大王，而花色并不对牌的大小产生影响。每一局游戏中，一副手牌由n张牌组成。游戏者每次可以根据规定的牌型进行出牌，首先打光自己的手牌一方取得游戏的胜利。</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">现在，牛牛只想知道，对于自己的若干组手牌，分别最少需要多少次出牌可以将它们打光。请你帮他解决这个问题。</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">需要注意的是，本题中游戏者每次可以出手的牌型与一般的斗地主相似而略有不同。</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">具体规则如下：</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;"><strong>本题数据随机，不支持hack，要hack或强力数据请点击<a target="_blank" href="https://www.luogu.org/problem/show?pid=2540">这里</a></strong></span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;"><strong>输入输出格式</strong></span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;"><strong>输入格式：</strong></span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">第一行包含用空格隔开的2个正整数T和n，表示手牌的组数以及每组手牌的张数。</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">接下来T组数据，每组数据n行，每行一个非负整数对aibi表示一张牌，其中ai示牌的数码，bi表示牌的花色，中间用空格隔开。特别的，我们用1来表示数码A，11表示数码J，12表示数码Q，13表示数码K；黑桃、红心、梅花、方片分别用1-4来表示；小王的表示方法为01，大王的表示方法为02。</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;"><strong>输出格式：</strong></span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">共T行，每行一个整数，表示打光第i手牌的最少次数。</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;"><strong>输入输出样例</strong></span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;"><strong>输入样例#1：</strong></span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">1 8</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">7 4</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">8 4</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">9 1</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">10 4</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">11 1</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">5 1</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">1 4</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">1 1</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;"><strong>输出样例#1：</strong></span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">3</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;"><strong>输入样例#2：</strong></span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">1 17</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">12 3</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">4 3</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">2 3</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">5 4</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">10 2</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">3 3</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">12 2</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">0 1</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">1 3</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">10 1</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">6 2</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">12 1</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">11 3</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">5 2</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">12 4</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">2 2</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">7 2</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;"><strong>输出样例#2：</strong></span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">6</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;"><strong>说明</strong></span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">样例1说明</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">共有1组手牌，包含8张牌：方片7，方片8，黑桃9，方片10，黑桃J，黑桃5，方片A以及黑桃A。可以通过打单顺子（方片7，方片8，黑桃9，方片10，黑桃J），单张牌（黑桃5）以及对子牌（黑桃A以及方片A）在3次内打光。</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">对于不同的测试点， 我们约定手牌组数T与张数n的规模如下：</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">数据保证：所有的手牌都是随机生成的。</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">&nbsp;</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">直接暴搜+剪枝</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">我们忽略掉没用的花色，直接统计每种牌出现的次数</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">每次都先出顺子，对于手中剩下的牌我们贪心地将剩下的组合牌需要打的次数计算出来，然后更新ans以剪枝。</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">&nbsp;</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">Node</span>
</p>
<pre name="code" class="cpp">#include&lt;cstdio&gt;
#include&lt;cstring&gt;
using namespace std;
 
const int maxn=25;
int a[maxn],c[maxn],n,t,ans;
 
int query() 
{
    memset(c,0,sizeof(c));
    for(int i=0;i&lt;=13;i++)c[a[i]]++;
    int tot=0;                                    
    while(c[4]&amp;&amp;c[2]&gt;1)c[4]--,c[2]-=2,tot++;      
    while(c[4]&amp;&amp;c[1]&gt;1)c[4]--,c[1]-=2,tot++;
    while(c[4]&amp;&amp;c[2])c[4]--,c[2]--,tot++;
    while(c[3]&amp;&amp;c[2])c[3]--,c[2]--,tot++;
    while(c[3]&amp;&amp;c[1])c[3]--,c[1]--,tot++;
    return tot+c[1]+c[2]+c[3]+c[4];                
}
 
void dfs(int now) 
{
    if(now&gt;=ans)return;
    int tmp=query();
    if(now+tmp&lt;ans)ans=now+tmp;
    for(int i=2;i&lt;=13;i++)
	{                                
        int j=i;
        while(a[j]&gt;=3)j++;
        if(j-i&gt;=2) 
            for(int j2=i+1;j2&lt;=j-1;j2++)
			{
                for(int k=i;k&lt;=j2;k++)a[k]-=3;
                dfs(now+1);
                for(int k=i;k&lt;=j2;k++)a[k]+=3;
            }
    }
    for(int i=2;i&lt;=13;i++) 
	 {                                 
        int j=i;
        while(a[j]&gt;=2)j++;
        if(j-i&gt;=3) 
            for(int j2=i+2;j2&lt;=j-1;j2++)
			{
                for(int k=i;k&lt;=j2;k++)a[k]-=2;
                dfs(now+1);
                for(int k=i;k&lt;=j2;k++)a[k]+=2;
            }
    }
    for(int i=2;i&lt;=13;i++)
	{                               
        int j=i;
        while(a[j]&gt;=1) j++;
        if(j-i&gt;=5) 
            for(int j2=i+4;j2&lt;=j-1;j2++)
			{
                for(int k=i;k&lt;=j2;k++)a[k]--;
                dfs(now+1);
                for(int k=i;k&lt;=j2;k++)a[k]++;
            }
    }
}

int main() 
{
    scanf(&quot;%d%d&quot;,&amp;t,&amp;n);
    while(t--) 
	{
        memset(a,0,sizeof(a));
        int x,y;
        for(int i=1;i&lt;=n;i++)
		{
            scanf(&quot;%d%d&quot;,&amp;x,&amp;y);
            if(x==1)x=13; 
			else if(x)x--;
            a[x]++;
        }
        ans=1e9;
        dfs(0);
        printf(&quot;%d\n&quot;,ans);
    }
    return 0;
}</pre>
<br />
<br />

<p>
	<br />
	
</p>
