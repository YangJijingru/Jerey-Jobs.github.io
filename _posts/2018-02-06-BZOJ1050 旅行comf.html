---
tags: 
 - 图论-最小生成树
grammar_cjkRuby: true
catalog: true
layout:  post
header-img: "img/header/P20.jpg"
preview-img: "/img/preview/P20.jpg"
---
<h2>
	<span style="font-family:Microsoft YaHei;font-size:16px;">标签：最小生成树，并查集</span>
</h2>
<p align="left">
	<strong><span style="color:blue;"><span style="font-family:Microsoft YaHei;font-size:16px;">Description</span></span></strong>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">给你一个无向图，N(N&lt;=500)个顶点, M(M&lt;=5000)条边，每条边有一个权值Vi(Vi&lt;30000)。给你两个顶点S和T，求</span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">一条路径，使得路径上最大边和最小边的比值最小。如果S和T之间没有路径，输出”IMPOSSIBLE”，否则输出这个</span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">比值，如果需要，表示成一个既约分数。 备注： 两个顶点之间可能有多条路径。</span>
</p>
<p align="left">
	<strong><span style="color:blue;"><span style="font-family:Microsoft YaHei;font-size:16px;">Input</span></span></strong>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">第一行包含两个正整数，N和M。下来的M行每行包含三个正整数：x，y和v。表示景点x到景点y之间有一条双向公路</span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">，车辆必须以速度v在该公路上行驶。最后一行包含两个正整数s，t，表示想知道从景点s到景点t最大最小速度比</span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">最小的路径。s和t不可能相同。</span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">1&lt;N&lt;=500,1&lt;=x,y&lt;=N，0&lt;v&lt;30000，0&lt;M&lt;=5000</span>
</p>
<p align="left">
	<strong><span style="color:blue;"><span style="font-family:Microsoft YaHei;font-size:16px;">Output</span></span></strong>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">如果景点s到景点t没有路径，输出“IMPOSSIBLE”。否则输出一个数，表示最小的速度比。</span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">如果需要，输出一个既约分数。</span>
</p>
<p align="left">
	<strong><span style="color:blue;"><span style="font-family:Microsoft YaHei;font-size:16px;">Sample Input</span></span></strong>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">【样例输入1】<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">4 2<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">1 2 1<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">3 4 2<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">1 4<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">【样例输入2】<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">3 3<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">1 2 10<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">1 2 5<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">2 3 8<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">1 3<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">【样例输入3】<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">3 2<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">1 2 2<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">2 3 4<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">1 3</span>
</p>
<p align="left">
	<strong><span style="color:blue;"><span style="font-family:Microsoft YaHei;font-size:16px;">Sample Output</span></span></strong>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">【样例输出1】<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">IMPOSSIBLE<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">【样例输出2】<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">5/4<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">【样例输出3】<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">2</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">&nbsp;</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">分析：使路径中边权最大</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">枚举第一条边，之后从这条边开始做kruskal，直到s和t联通或所有边都用完</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;"><span style="background:rgb(254,254,242)">因为最小生成树可以保证最大边权尽量小，所以在最小边权指定的情况下可以找到比值最小的情况，时间复杂度为</span><span style="background:rgb(254,254,242)">O</span><span style="background:rgb(254,254,242)">（</span><span style="background:rgb(254,254,242)">m^2</span><span style="background:rgb(254,254,242)">）</span></span>
</p>
<p>
	<span style="background:rgb(254,254,242)"><span style="font-family:Microsoft YaHei;font-size:16px;">Code</span></span>
</p>
<p>
	<span style="background:rgb(254,254,242)"></span>
</p>
<pre name="code" class="cpp">#include&lt;bits/stdc++.h&gt;
#define rep(i,a,b) for(int i=a;i&lt;=b;i++)
#define dep(i,a,b) for(int i=a;i&gt;=b;i--)
using namespace std;
const int maxm=5010,maxn=510;
struct edge{int u,v,w;}e[maxm];
int fa[maxn];

inline int gcd(int x,int y){return y?gcd(y,x%y):x;}
inline int read(){
	int f=1,x=0;char ch=getchar();
	while(ch&lt;'0'||ch&gt;'9'){if(ch=='-')f=-1;ch=getchar();}
	while(ch&gt;='0'&amp;&amp;ch&lt;='9'){x=x*10+ch-'0';ch=getchar();}
	return x*f;
}
inline int cmp(edge x,edge y){return x.w&lt;y.w;}
inline int find(int x){
	if(fa[x]!=x)return fa[x]=find(fa[x]);
	else return fa[x];
}

int n,m,s,t,start=0,ansmx=1,ansmn=0,mx,mn,r,x,y,z,root1,root2;

int main(){
	n=read(),m=read();
	rep(i,0,m-1) e[i].u=read(),e[i].v=read(),e[i].w=read();
	sort(e,e+m,cmp);
	s=read(),t=read();
	while(start&lt;m){
		mn=mx=-1;
		rep(i,1,n)fa[i]=i;
		rep(x,start,m-1){
			root1=find(e[x].u),root2=find(e[x].v);fa[root1]=root2;
			if(find(s)==find(t)){mx=e[x].w;y=x;break;}
		}
		if(mx==-1){
			if(!ansmn){printf(&quot;IMPOSSIBLE\n&quot;);return 0;}
			else break;
		}
		rep(i,1,n)fa[i]=i;
		dep(x,y,0){
			root1=find(e[x].u),root2=find(e[x].v);fa[root1]=root2;
			if(find(s)==find(t)){mn=e[x].w;z=x;break;}
		}
		start=z+1;
		if(mn==-1){
			if(!ansmn){printf(&quot;IMPOSSIBLE\n&quot;);return 0;}
			else break;
		}
		int r=gcd(mx,mn);mx/=r;mn/=r;
		if(ansmx*mn&gt;ansmn*mx){ansmn=mn;ansmx=mx;}
	}
	if(ansmn==1)printf(&quot;%d\n&quot;,ansmx);
	else printf(&quot;%d/%d\n&quot;,ansmx,ansmn);
	return 0;
}
</pre>
<br />
<br />

<p>
	<br />
	
</p>
