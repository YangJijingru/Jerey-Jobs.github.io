---
tags: 
 - 基础算法-模拟
 - DP-树形
grammar_cjkRuby: true
catalog: true
layout:  post
header-img: "img/header/P37.jpg"
preview-img: "/img/preview/P77.jpg"
---
<p style="margin:0px">
	<strong><span style="font-family:等线;font-size:16px;">标签：树，模拟</span></strong>
</p>
<p style="margin:0px">
	<strong><span style="margin:0px" lang="EN-US"><span style="font-family:等线;font-size:16px;">Description</span></span></strong>
</p>
<p style="margin:0px">
	<span style="font-family:等线;font-size:16px;">有一个树形结构的宾馆，<span style="margin:0px" lang="EN-US">n</span>个房间，<span style="margin:0px" lang="EN-US">n-1</span>条无向边，每条边的长度相同，任意两个房间可以相互到达。吉丽要给他的三个妹子各开（一个）房（间）。三个妹子住的房间要互不相同（否则要打起来了），为了让吉丽满意，你需要让三个房间两两距离相同。<span style="margin:0px" lang="EN-US"><br />
	</span>有多少种方案能让吉丽满意？</span><span style="margin:0px" lang="EN-US"></span>
</p>
<p style="margin:0px">
	<strong><span style="margin:0px" lang="EN-US"><span style="font-family:等线;font-size:16px;">Input</span></span></strong>
</p>
<p style="margin:0px">
	<span style="font-family:等线;font-size:16px;">第一行一个数<span style="margin:0px" lang="EN-US">n</span>。<span style="margin:0px" lang="EN-US"><br />
	</span>接下来<span style="margin:0px" lang="EN-US">n-1</span>行，每行两个数<span style="margin:0px" lang="EN-US">x,y</span>，表示<span style="margin:0px" lang="EN-US">x</span>和<span style="margin:0px" lang="EN-US">y</span>之间有一条边相连。</span><span style="margin:0px" lang="EN-US"></span>
</p>
<p style="margin:0px">
	<strong><span style="margin:0px" lang="EN-US"><span style="font-family:等线;font-size:16px;">Output</span></span></strong>
</p>
<p style="margin:0px">
	<span style="font-family:等线;font-size:16px;">让吉丽满意的方案数。</span><span style="margin:0px" lang="EN-US"></span>
</p>
<p style="margin:0px">
	<strong><span style="margin:0px" lang="EN-US"><span style="font-family:等线;font-size:16px;">Sample Input</span></span></strong>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:等线;font-size:16px;">7</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:等线;font-size:16px;">1 2</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:等线;font-size:16px;">5 7</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:等线;font-size:16px;">2 5</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:等线;font-size:16px;">2 3</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:等线;font-size:16px;">5 6</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:等线;font-size:16px;">4 5</span></span>
</p>
<p style="margin:0px">
	<strong><span style="margin:0px" lang="EN-US"><span style="font-family:等线;font-size:16px;">Sample Output</span></span></strong>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:等线;font-size:16px;">5</span></span>
</p>
<p style="margin:0px">
	<strong><span style="margin:0px" lang="EN-US"><span style="font-family:等线;font-size:16px;">HINT</span></span></strong>
</p>
<p style="margin:0px">
	<span style="font-family:等线;"><span style="font-size:16px;">【样例解释】<span style="margin:0px" lang="EN-US"><br />
	{1,3,5},{2,4,6},{2,4,7},{2,6,7},{4,6,7}<br />
	</span>【数据范围】<span style="margin:0px" lang="EN-US"><br />
	n≤5000</span></span></span>
</p>
<p style="margin:0px">
	<strong><span style="margin:0px" lang="EN-US"><span style="font-family:等线;font-size:16px;">Source</span></span></strong>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><a target="_blank" href="http://www.lydsy.com/JudgeOnline/problemset.php?search=By%20Dzy"><span style="font-family:等线;font-size:16px;color:#0563c1;">By Dzy</span></a></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:等线;font-size:16px;">&nbsp;</span></span>
</p>
<p style="margin:0px">
	<span style="font-family:等线;font-size:16px;">暴力枚举三个点的中心</span><span style="margin:0px" lang="EN-US"></span>
</p>
<p style="margin:0px">
	<span style="font-family:等线;font-size:16px;">依次对其子树暴力枚举</span><span style="margin:0px" lang="EN-US"></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"><span style="font-family:等线;font-size:16px;">Code</span></span>
</p>
<p style="margin:0px">
	<span style="margin:0px" lang="EN-US"></span>
</p>
<pre class="cpp" name="code">#include&lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;cstdlib&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;vector&gt;
#include&lt;queue&gt;
#define rep(i,a,b) for(int i=a;i&lt;=b;i++)
#define dep(i,a,b) for(int i=a;i&gt;=b;i--)
#define reg(x) for(int i=head[x];i;i=e[i].next)
#define LL long long
#define mem(x,num) memset(x,num,sizeof x)
using namespace std;
inline LL read()
{
	LL f=1,x=0;char ch=getchar();
	while(ch&lt;'0'||ch&gt;'9'){if(ch=='-')f=-1;ch=getchar();}
	while(ch&gt;='0'&amp;&amp;ch&lt;='9'){x=x*10+ch-'0';ch=getchar();}
	return x*f;
}
const int maxn=5006;
LL deep[maxn],head[maxn],num[maxn],s1[maxn],s2[maxn],ans=0,cnt=0,n,mx;
struct edge{int to,next;}e[maxn&lt;&lt;1];

inline void dfs(int x,int fa)
{
	mx=max(mx,deep[x]);
	num[deep[x]]++;
	reg(x){
		if(e[i].to==fa)continue;
		deep[e[i].to]=deep[x]+1;
		dfs(e[i].to,x);
	}
}

int main()
{
	n=read();
	rep(i,1,n-1){
		int u=read(),v=read();
		e[++cnt]=(edge){u,head[v]};head[v]=cnt;
		e[++cnt]=(edge){v,head[u]};head[u]=cnt;
	}
	rep(x,1,n){
		mem(s1,0),mem(s2,0);
		reg(x){
			deep[e[i].to]=1;
			dfs(e[i].to,x);
			rep(j,1,mx){
				ans+=s2[j]*num[j];
				s2[j]+=num[j]*s1[j];
				s1[j]+=num[j];
			    num[j]=0;
			}
		}
	}
	printf(&quot;%lld\n&quot;,ans);
    return 0;
}</pre>
<br />

<p>
	<br />
	
</p>
