---
tags: 
 - DP-区间
grammar_cjkRuby: true
catalog: true
layout:  post
header-img: "img/header/P22.jpg"
preview-img: "/img/preview/P22.jpg"
---
<p style="text-align:left" align="center">
	<span style="font-family:'Microsoft YaHei';font-size:16px;color:blue;"><strong>标签：区间</strong></span><span style="font-family:'Microsoft YaHei';font-size:16px;color:blue;"><strong>DP</strong></span>
</p>
<p align="left">
	<strong><span style="color:blue;"><span style="font-family:Microsoft YaHei;font-size:16px;">Description</span></span></strong>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">　　某人有一套玩具，并想法给玩具命名。首先他选择WING四个字母中的任意一个字母作为玩具的基本名字。然后</span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">他会根据自己的喜好，将名字中任意一个字母用“WING”中任意两个字母代替，使得自己的名字能够扩充得很长。</span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">现在，他想请你猜猜某一个很长的名字，最初可能是由哪几个字母变形过来的。</span>
</p>
<p align="left">
	<strong><span style="color:blue;"><span style="font-family:Microsoft YaHei;font-size:16px;">Input</span></span></strong>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">　　第一行四个整数W、I、N、G。表示每一个字母能由几种两个字母所替代。接下来W行，每行两个字母,表示W可</span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">以用这两个字母替代。接下来I行，每行两个字母,表示I可以用这两个字母替代。接下来N行，每行两个字母,表示N</span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">可以用这两个字母替代。接下来G行，每行两个字母,表示G可以用这两个字母替代。最后一行一个长度不超过Len的</span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">字符串。表示这个玩具的名字。</span>
</p>
<p align="left">
	<strong><span style="color:blue;"><span style="font-family:Microsoft YaHei;font-size:16px;">Output</span></span></strong>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">　　一行字符串，该名字可能由哪些字母变形而得到。（按照WING的顺序输出）如果给的名字不能由任何一个字母</span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">变形而得到则输出“The name is wrong!”</span>
</p>
<p align="left">
	<strong><span style="color:blue;"><span style="font-family:Microsoft YaHei;font-size:16px;">Sample Input</span></span></strong>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">1 1 1 1<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">II<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">WW<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">WW<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">IG<span style="background:rgb(141,184,255)"><br />
	<br />
	</span></span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">IIII</span>
</p>
<p align="left">
	<strong><span style="color:blue;"><span style="font-family:Microsoft YaHei;font-size:16px;">Sample Output</span></span></strong>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">IN</span>
</p>
<p align="left">
	<strong><span style="color:blue;"><span style="font-family:Microsoft YaHei;font-size:16px;">HINT</span></span></strong>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">W可以变成II所以IIII可以缩成WW IN均能变成WW所以WW又可以缩成I或者N 所以最终答案应该按照“WING”的顺序</span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">&nbsp;</span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">输出IN&nbsp;</span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">&nbsp;</span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">[数据范围]</span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">&nbsp;</span>
</p>
<p style="background:rgb(228,240,248)" align="left">
	<span style="font-family:Microsoft YaHei;font-size:16px;">100%数据满足Len&lt;=200，W、I、N、G&lt;=16</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">&nbsp;</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">记忆化搜索，dp(l,r,k)表示区间l—&gt;r能否合成字母k</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">如果k=a+b（k,a,b）都为字符（串），那么状态转移为f[l][r][k]=(f[l][i][a]&amp;f[i+1][r][b])&nbsp; (l&lt;=i&lt;r)</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">&nbsp;</span>
</p>
<p>
	<span style="font-family:Microsoft YaHei;font-size:16px;">Code</span>
</p>
<pre name="code" class="cpp">#include&lt;bits/stdc++.h&gt;
#define rep(i,a,b) for(int i=a;i&lt;=b;i++)
#define dep(i,a,b) for(int i=a;i&gt;=b;i--)
#define LL long long
#define mem(x,num) memset(x,num,sizeof x)
using namespace std;
 
const int maxn=206;
char p[4]={'W','I','N','G'};
int q[255],t[4],f[maxn][maxn][4];
char s[4][20][2],ch[maxn];
 
bool dp(int l,int r,int k){
    if(l==r)return ch[l]==p[k];
    int &amp;res=f[l][r][k];
    if(res!=-1)return res;
    rep(i,1,t[k])
        rep(j,l,r-1)
            if(dp(l,j,q[s[k][i][0]])&amp;&amp;dp(j+1,r,q[s[k][i][1]]))return res=1;
    return res=0;
}
 
int main()
{
    mem(f,-1);
    q['W']=0,q['I']=1,q['N']=2,q['G']=3;
    rep(i,0,3)scanf(&quot;%d&quot;,&amp;t[i]);
    rep(i,0,3)
        rep(j,1,t[i])scanf(&quot;%s&quot;,s[i][j]);
    scanf(&quot;%s&quot;,ch+1);
    int len=strlen(ch+1);bool flag=false;
    rep(i,1,4)
        if(dp(1,len,i))flag=true,printf(&quot;%c&quot;,p[i]);
    if(!flag)printf(&quot;The name is wrong!&quot;);
    return 0;
}
</pre>
<br />
<br />

<p>
	<br />
	
</p>
<br />